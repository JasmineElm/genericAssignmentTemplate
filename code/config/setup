#!/usr/bin/env bash

cd ../template || exit

# remove any user defined csl/tex files, and use sensible defults from git repos...
rm "*.csl"
rm "*.tex"

# eisvogel template is perfect to demonstrate the script
curl -o def.tex https://raw.githubusercontent.com/Wandmalfarbe/pandoc-latex-template/master/eisvogel.tex

## Definitive Harvard style...
# curl -o def.csl https://raw.githubusercontent.com/citation-style-language/styles/master/harvard-cite-them-right.csl

## use the OU Harvard style instead...
curl -o def.csl https://raw.githubusercontent.com/citation-style-language/styles/master/the-open-university-harvard.csl

cd -

# No xelatex? no problem! (required for pdf generation)
[[ $(type tex &>/dev/null) ]] || sudo apt install -y texlive-xetex

[[ $(type pip3 &>/dev/null) ]] || sudo apt install -y python3-pip
# until Pandoc supports `\pagebreak` for docx, lets install a filter that does
pip3 install git+https://github.com/pandocker/pandoc-docx-pagebreak-py
